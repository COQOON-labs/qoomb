echo "ğŸ” Running pre-push checks..."

# Generate Prisma client (required for type-check)
echo "ğŸ—„ï¸  Generating Prisma client..."
pnpm run db:generate

# Lint all packages
echo "ğŸ” Linting..."
pnpm run lint

# Check formatting (catches files not touched by lint-staged)
echo "ğŸ¨ Checking formatting..."
pnpm run format:check

# Type check all packages
echo "ğŸ“ Type checking..."
pnpm turbo run type-check

# Run tests
echo "ğŸ§ª Running tests..."
pnpm turbo run test --filter='!@qoomb/web'

# Build check (full build to catch Vite import resolution errors)
echo "ğŸ—ï¸  Build check..."
pnpm turbo run build

echo "âœ… Pre-push checks passed!"
